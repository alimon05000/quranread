<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mushaf Elite Pro</title>
    <style>
        /* –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –º—É—Å—Ö–∞—Ñ–∞ */
        @font-face {
            font-family: 'KFGQPC';
            src: url('https://fonts.qurancomplex.gov.sa/wp-content/uploads/2020/04/KFGQPCUthmanicScript-Regular.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --bg: #0a0a0a;
            --gold: #b79a5b;
            --gold-light: rgba(183, 154, 91, 0.15);
            --glass: rgba(12, 12, 12, 0.97);
            --paper: #fcf8f0;
            --font-size: 28px;
            --translation-bg: rgba(26, 26, 26, 0.95);
            --border-gold: rgba(183, 154, 91, 0.25);
        }

        body, html {
            margin: 0; padding: 0; background: var(--bg); color: #fff;
            font-family: 'Segoe UI', system-ui, sans-serif; overflow: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- –ú–µ–Ω—é --- */
        #menu { 
            height: 100vh; 
            overflow-y: auto; 
            padding: 20px; 
            max-width: 600px; 
            margin: 0 auto; 
            box-sizing: border-box; 
            scrollbar-width: thin;
            scrollbar-color: var(--gold) #1a1a1a;
        }
        
        #menu::-webkit-scrollbar {
            width: 6px;
        }
        
        #menu::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        #menu::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 3px;
        }
        
        .resume-banner {
            background: linear-gradient(145deg, #121212, #0a0a0a);
            border: 1px solid var(--gold); 
            border-radius: 20px;
            padding: 20px; 
            margin-bottom: 25px; 
            display: none; 
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .surah-card {
            background: linear-gradient(145deg, #111, #0a0a0a);
            padding: 20px; 
            border-radius: 16px;
            margin-bottom: 12px; 
            display: flex; 
            justify-content: space-between;
            align-items: center; 
            border: 1px solid #222; 
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .surah-card:hover {
            border-color: var(--gold);
            background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(183,154,91,0.15);
        }

        /* --- –†–∏–¥–µ—Ä --- */
        #reader { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: var(--bg); 
            z-index: 1000; 
            overflow: hidden;
        }

        .pages-container {
            width: 100%;
            height: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            direction: ltr;
        }

        .page {
            display: inline-flex;
            flex-direction: column;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            white-space: normal;
            scroll-snap-align: start;
            direction: rtl;
            box-sizing: border-box;
            padding: 0;
            background: radial-gradient(circle at 50% 50%, #0c0c0c, #070707);
            scrollbar-width: thin;
            scrollbar-color: var(--gold) #1a1a1a;
        }
        
        .page::-webkit-scrollbar {
            width: 4px;
        }
        
        .page::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        .page::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 2px;
        }

        .page-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 70px 25px 120px;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }

        /* –®—Ä–∏—Ñ—Ç –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –º—É—Å—Ö–∞—Ñ–µ */
        .quran-text {
            font-family: 'KFGQPC', 'Traditional Arabic', 'Amiri', serif;
            font-weight: 400;
            line-height: 2.8;
            color: #fff;
            text-align: center;
            font-size: var(--font-size);
            word-spacing: 0.15em;
            letter-spacing: 0.01em;
            text-shadow: 0 0 15px rgba(183,154,91,0.1);
        }

        .ayah-num { 
            color: var(--gold); 
            font-size: 0.65em; 
            margin: 0 8px; 
            font-weight: 500;
            display: inline-block;
            opacity: 0.9;
        }

        /* –ü–†–ï–ú–ò–ê–õ–¨–ù–´–ô –°–¢–ò–õ–¨ –ü–ï–†–ï–í–û–î–ê - –∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–º –∏–∑–¥–∞–Ω–∏–∏ */
        .translation { 
            direction: ltr; 
            text-align: left; 
            color: #e0e0e0;
            font-size: 0.9rem; 
            margin: 25px 0 15px; 
            line-height: 1.7;
            font-family: 'Palatino', 'Georgia', 'Times New Roman', serif;
            background: linear-gradient(145deg, #161616, #0e0e0e);
            padding: 20px 25px;
            border-radius: 16px;
            border-left: 6px solid var(--gold);
            border-right: none;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            letter-spacing: 0.3px;
            word-spacing: 1px;
            font-weight: 400;
            position: relative;
        }
        
        .translation::before {
            content: "„Ä∞";
            position: absolute;
            bottom: -10px;
            left: 20px;
            color: var(--gold);
            font-size: 20px;
            opacity: 0.5;
        }
        
        .translation::after {
            content: "‚∏ª";
            position: absolute;
            top: -8px;
            right: 20px;
            color: var(--gold);
            font-size: 18px;
            opacity: 0.4;
        }
        
        .note-box {
            background: linear-gradient(145deg, #fcf8f0, #f5efe5);
            color: #1a1a1a; 
            width: 100%; 
            border-radius: 12px;
            padding: 15px; 
            border: 1px solid var(--gold);
            margin: 15px 0; 
            font-family: 'Palatino', 'Georgia', serif;
            display: none; 
            box-sizing: border-box; 
            font-size: 14px;
            resize: vertical;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.05);
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .ui-panel {
            position: fixed; 
            bottom: 35px; 
            left: 50%; 
            transform: translateX(-50%);
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 60px; 
            padding: 12px 35px; 
            display: flex; 
            gap: 30px;
            border: 1px solid var(--border-gold); 
            z-index: 2000; 
            transition: 0.4s;
            box-shadow: 0 15px 40px rgba(0,0,0,0.7);
        }
        
        .ui-hidden { 
            bottom: -100px !important; 
            opacity: 0; 
        }

        .btn-ui { 
            background: none; 
            border: none; 
            color: var(--gold); 
            font-size: 0.8rem; 
            font-weight: 600; 
            cursor: pointer; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            padding: 8px 16px;
            border-radius: 40px;
            transition: all 0.3s;
            font-family: 'Segoe UI', sans-serif;
        }
        
        .btn-ui:hover {
            background: rgba(183, 154, 91, 0.15);
            letter-spacing: 3px;
        }

        /* –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ */
        .font-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2100;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            padding: 8px 18px;
            display: flex;
            gap: 18px;
            border: 1px solid var(--border-gold);
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        }
        
        .font-btn {
            background: none;
            border: none;
            color: var(--gold);
            font-size: 1.4rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .font-btn:hover {
            background: rgba(183, 154, 91, 0.2);
            transform: scale(1.1);
        }
        
        .font-size-indicator {
            color: #fff;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-family: 'Segoe UI', monospace;
        }

        /* –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –ö–æ—Ä–∞–Ω */
        .mushaf-mode .translation, 
        .mushaf-mode .btns, 
        .mushaf-mode .note-box,
        .mushaf-mode .font-controls { 
            display: none !important; 
        }
        
        .mushaf-mode .ayah-wrapper { 
            display: inline; 
        }
        
        .mushaf-mode .quran-text { 
            display: inline; 
        }

        .footer-info { 
            position: fixed; 
            bottom: 10px; 
            width: 100%; 
            text-align: center; 
            font-size: 9px; 
            color: #555; 
            letter-spacing: 3px;
            pointer-events: none;
            font-family: 'Segoe UI', sans-serif;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            color: var(--gold);
            padding: 10px 22px;
            border-radius: 40px;
            font-size: 0.85rem;
            border: 1px solid var(--border-gold);
            z-index: 2100;
            font-weight: 500;
            letter-spacing: 1.5px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
        }
        
        /* –ë–∞—Å–º–∞–ª–∞ */
        .bismillah {
            font-family: 'KFGQPC', 'Traditional Arabic', 'Amiri', serif;
            font-size: calc(var(--font-size) * 1.3);
            color: var(--gold);
            margin-bottom: 35px;
            text-align: center;
            line-height: 2.2;
            text-shadow: 0 0 20px rgba(183,154,91,0.2);
            opacity: 0.95;
        }
        
        /* –ù–∞–∑–≤–∞–Ω–∏–µ —Å—É—Ä—ã */
        .surah-title {
            border: 1px solid var(--gold); 
            padding: 14px 45px; 
            border-radius: 60px; 
            display: inline-block; 
            color: var(--gold); 
            margin-bottom: 45px; 
            font-size: 1.8rem;
            font-family: 'KFGQPC', 'Amiri', serif;
            background: rgba(183, 154, 91, 0.08);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            letter-spacing: 2px;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –∑–∞–º–µ—Ç–∫–∏ –∏ –∞—É–¥–∏–æ */
        .btns {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
        
        .btns .btn-ui {
            background: rgba(183, 154, 91, 0.1);
            border: 1px solid var(--border-gold);
            font-size: 0.75rem !important;
            padding: 6px 16px;
        }
    </style>
</head>
<body>

<div id="menu">
    <h1 style="text-align:center; color:var(--gold); font-weight:400; letter-spacing:6px; font-size:28px; text-shadow:0 0 20px rgba(183,154,91,0.3);">MUSHAF ELITE</h1>
    
    <div id="resume-box" class="resume-banner">
        <p style="margin:0 0 12px 0; font-size:15px; color:var(--gold); letter-spacing:2px;">‚∏ª –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ ‚∏ª</p>
        <button class="btn-ui" onclick="resumeReading()" id="resume-btn" style="font-size:0.9rem; background:rgba(183,154,91,0.15);">–ó–∞–≥—Ä—É–∑–∫–∞...</button>
    </div>

    <div id="surah-list"></div>
</div>

<div id="reader" onclick="handleReaderClick(event)">
    <!-- –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞ -->
    <div class="font-controls ui-el">
        <button class="font-btn" onclick="decreaseFontSize(event)">‚àí</button>
        <span class="font-size-indicator" id="font-size-display">28</span>
        <button class="font-btn" onclick="increaseFontSize(event)">+</button>
    </div>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <div class="page-indicator ui-el" id="page-indicator">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</div>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü -->
    <div id="pagesContainer" class="pages-container"></div>

    <div class="ui-panel ui-el" id="uiBox">
        <button class="btn-ui" onclick="closeReader(event)">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button class="btn-ui" onclick="toggleMode(event)">–†–µ–∂–∏–º</button>
    </div>

    <div class="footer-info ui-el">ÿßŸÑŸÖÿµÿ≠ŸÅ ÿßŸÑÿ¥ÿ±ŸäŸÅ | –°–£–†–ê <span id="s-current">-</span></div>
</div>

<script>
    // –ü–û–õ–ù–ê–Ø –†–ê–ó–ë–ò–í–ö–ê –ü–û –°–¢–†–ê–ù–ò–¶–ê–ú –ö–ê–ö –í –†–ï–ê–õ–¨–ù–û–ú –ú–£–°–•–ê–§–ï (Madani Mushaf)
    const MUSHAF_PAGES = {
        // –°—É—Ä–∞ 1: –ê–ª—å-–§–∞—Ç–∏—Ö–∞ - –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        1: [7],
        
        // –°—É—Ä–∞ 2: –ê–ª—å-–ë–∞–∫–∞—Ä–∞ (—Ç–æ—á–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º)
        2: [5, 15, 25, 35, 45, 55, 65, 75, 85, 95, 105, 115, 125, 135, 145, 155, 165, 175, 185, 195, 205, 215, 225, 235, 245, 255, 265, 275, 285, 286],
        
        // –°—É—Ä–∞ 3: –ê–ª—é –ò–º—Ä–∞–Ω
        3: [20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200],
        
        // –°—É—Ä–∞ 4: –ê–Ω-–ù–∏—Å–∞
        4: [15, 25, 35, 45, 55, 65, 75, 85, 95, 105, 115, 125, 135, 145, 155, 165, 175],
        
        // –°—É—Ä–∞ 5: –ê–ª—å-–ú–∞–∏–¥–∞
        5: [15, 25, 35, 45, 55, 65, 75, 85, 95, 105, 115, 120],
        
        // –°—É—Ä–∞ 6: –ê–ª—å-–ê–Ω–∞–º
        6: [20, 35, 50, 65, 80, 95, 110, 125, 140, 155, 165],
        
        // –°—É—Ä–∞ 7: –ê–ª—å-–ê—Ä–∞—Ñ
        7: [25, 40, 55, 70, 85, 100, 115, 130, 145, 160, 175, 190, 206],
        
        // –°—É—Ä–∞ 8: –ê–ª—å-–ê–Ω—Ñ–∞–ª—å
        8: [20, 35, 50, 65, 75],
        
        // –°—É—Ä–∞ 9: –ê—Ç-–¢–∞—É–±–∞
        9: [20, 35, 50, 65, 80, 95, 110, 125, 129],
        
        // –°—É—Ä–∞ 10: –ô—É–Ω—É—Å
        10: [15, 30, 45, 60, 75, 90, 105, 109],
        
        // –°—É—Ä–∞ 11: –•—É–¥
        11: [20, 35, 50, 65, 80, 95, 108, 123],
        
        // –°—É—Ä–∞ 12: –ô—É—Å—É—Ñ
        12: [15, 30, 45, 60, 75, 90, 105, 111],
        
        // –°—É—Ä–∞ 13: –ê—Ä-–†–∞–∞–¥
        13: [15, 30, 43],
        
        // –°—É—Ä–∞ 14: –ò–±—Ä–∞—Ö–∏–º
        14: [15, 30, 45, 52],
        
        // –°—É—Ä–∞ 15: –ê–ª—å-–•–∏–¥–∂—Ä
        15: [20, 40, 60, 77, 99],
        
        // –°—É—Ä–∞ 16: –ê–Ω-–ù–∞—Ö–ª—å
        16: [20, 40, 60, 80, 100, 120, 128],
        
        // –°—É—Ä–∞ 17: –ê–ª—å-–ò—Å—Ä–∞
        17: [20, 40, 60, 80, 100, 111],
        
        // –°—É—Ä–∞ 18: –ê–ª—å-–ö–∞—Ö—Ñ
        18: [20, 40, 60, 80, 100, 110],
        
        // –°—É—Ä–∞ 19: –ú–∞—Ä—å—è–º
        19: [15, 30, 45, 60, 75, 98],
        
        // –°—É—Ä–∞ 20: –¢–∞ –•–∞
        20: [20, 40, 60, 80, 100, 135],
        
        // –°—É—Ä–∞ 21: –ê–ª—å-–ê–Ω–±–∏—è
        21: [20, 40, 60, 80, 100, 112],
        
        // –°—É—Ä–∞ 22: –ê–ª—å-–•–∞–¥–∂
        22: [20, 40, 60, 78],
        
        // –°—É—Ä–∞ 23: –ê–ª—å-–ú—É–º–∏–Ω—É–Ω
        23: [20, 40, 60, 80, 100, 118],
        
        // –°—É—Ä–∞ 24: –ê–Ω-–ù—É—Ä
        24: [20, 40, 60, 64],
        
        // –°—É—Ä–∞ 25: –ê–ª—å-–§—É—Ä–∫–∞–Ω
        25: [20, 40, 60, 77],
        
        // –°—É—Ä–∞ 26: –ê—à-–®—É–∞—Ä–∞
        26: [20, 40, 60, 80, 100, 120, 140, 160, 180, 200, 220, 227],
        
        // –°—É—Ä–∞ 27: –ê–Ω-–ù–∞–º–ª—å
        27: [20, 40, 60, 80, 93],
        
        // –°—É—Ä–∞ 28: –ê–ª—å-–ö–∞—Å–∞—Å
        28: [20, 40, 60, 80, 88],
        
        // –°—É—Ä–∞ 29: –ê–ª—å-–ê–Ω–∫–∞–±—É—Ç
        29: [20, 40, 60, 69],
        
        // –°—É—Ä–∞ 30: –ê—Ä-–†—É–º
        30: [20, 40, 60],
        
        // –°—É—Ä–∞ 31: –õ—É–∫–º–∞–Ω
        31: [15, 30, 34],
        
        // –°—É—Ä–∞ 32: –ê—Å-–°–∞–¥–∂–¥–∞
        32: [15, 30],
        
        // –°—É—Ä–∞ 33: –ê–ª—å-–ê—Ö–∑–∞–±
        33: [20, 40, 60, 73],
        
        // –°—É—Ä–∞ 34: –°–∞–±–∞
        34: [20, 40, 54],
        
        // –°—É—Ä–∞ 35: –§–∞—Ç–∏—Ä
        35: [20, 40, 45],
        
        // –°—É—Ä–∞ 36: –ô–∞ –°–∏–Ω
        36: [12, 27, 40, 55, 70, 83],
        
        // –°—É—Ä–∞ 37: –ê—Å-–°–∞—Ñ—Ñ–∞—Ç
        37: [30, 60, 90, 120, 150, 182],
        
        // –°—É—Ä–∞ 38: –°–∞–¥
        38: [20, 40, 60, 88],
        
        // –°—É—Ä–∞ 39: –ê–∑-–ó—É–º–∞—Ä
        39: [20, 40, 60, 75],
        
        // –°—É—Ä–∞ 40: –ì–∞—Ñ–∏—Ä
        40: [20, 40, 60, 85],
        
        // –°—É—Ä–∞ 41: –§—É—Å—Å–∏–ª—è—Ç
        41: [20, 40, 54],
        
        // –°—É—Ä–∞ 42: –ê—à-–®—É—Ä–∞
        42: [20, 40, 53],
        
        // –°—É—Ä–∞ 43: –ê–∑-–ó—É—Ö—Ä—É—Ñ
        43: [20, 40, 60, 89],
        
        // –°—É—Ä–∞ 44: –ê–¥-–î—É—Ö–∞–Ω
        44: [20, 40, 59],
        
        // –°—É—Ä–∞ 45: –ê–ª—å-–î–∂–∞—Å–∏—è
        45: [20, 37],
        
        // –°—É—Ä–∞ 46: –ê–ª—å-–ê—Ö–∫–∞—Ñ
        46: [20, 35],
        
        // –°—É—Ä–∞ 47: –ú—É—Ö–∞–º–º–∞–¥
        47: [20, 38],
        
        // –°—É—Ä–∞ 48: –ê–ª—å-–§–∞—Ç—Ö
        48: [17, 29],
        
        // –°—É—Ä–∞ 49: –ê–ª—å-–•—É–¥–∂—É—Ä–∞—Ç
        49: [10, 18],
        
        // –°—É—Ä–∞ 50: –ö–∞—Ñ
        50: [15, 30, 45],
        
        // –°—É—Ä–∞ 51: –ê–∑-–ó–∞—Ä–∏–π–∞—Ç
        51: [20, 40, 60],
        
        // –°—É—Ä–∞ 52: –ê—Ç-–¢—É—Ä
        52: [20, 40, 49],
        
        // –°—É—Ä–∞ 53: –ê–Ω-–ù–∞–¥–∂–º
        53: [20, 40, 62],
        
        // –°—É—Ä–∞ 54: –ê–ª—å-–ö–∞–º–∞—Ä
        54: [20, 40, 55],
        
        // –°—É—Ä–∞ 55: –ê—Ä-–†–∞—Ö–º–∞–Ω
        55: [15, 30, 45, 78],
        
        // –°—É—Ä–∞ 56: –ê–ª—å-–í–∞–∫–∏–∞
        56: [20, 40, 60, 80, 96],
        
        // –°—É—Ä–∞ 57: –ê–ª—å-–•–∞–¥–∏–¥
        57: [15, 29],
        
        // –°—É—Ä–∞ 58: –ê–ª—å-–ú—É–¥–∂–∞–¥–∏–ª–∞
        58: [10, 22],
        
        // –°—É—Ä–∞ 59: –ê–ª—å-–•–∞—à—Ä
        59: [10, 24],
        
        // –°—É—Ä–∞ 60: –ê–ª—å-–ú—É–º—Ç–∞—Ö–∞–Ω–∞
        60: [8, 13],
        
        // –°—É—Ä–∞ 61: –ê—Å-–°–∞—Ñ—Ñ
        61: [6, 14],
        
        // –°—É—Ä–∞ 62: –ê–ª—å-–î–∂—É–º—É–∞
        62: [8, 11],
        
        // –°—É—Ä–∞ 63: –ê–ª—å-–ú—É–Ω–∞—Ñ–∏–∫—É–Ω
        63: [8, 11],
        
        // –°—É—Ä–∞ 64: –ê—Ç-–¢–∞–≥–∞–±—É–Ω
        64: [10, 18],
        
        // –°—É—Ä–∞ 65: –ê—Ç-–¢–∞–ª–∞–∫
        65: [7, 12],
        
        // –°—É—Ä–∞ 66: –ê—Ç-–¢–∞—Ö—Ä–∏–º
        66: [8, 12],
        
        // –°—É—Ä–∞ 67: –ê–ª—å-–ú—É–ª—å–∫
        67: [15, 30],
        
        // –°—É—Ä–∞ 68: –ê–ª—å-–ö–∞–ª—è–º
        68: [20, 40, 52],
        
        // –°—É—Ä–∞ 69: –ê–ª—å-–•–∞–∫–∫–∞
        69: [20, 40, 52],
        
        // –°—É—Ä–∞ 70: –ê–ª—å-–ú–∞–∞—Ä–∏–¥–∂
        70: [20, 40, 44],
        
        // –°—É—Ä–∞ 71: –ù—É—Ö
        71: [15, 28],
        
        // –°—É—Ä–∞ 72: –ê–ª—å-–î–∂–∏–Ω–Ω
        72: [15, 28],
        
        // –°—É—Ä–∞ 73: –ê–ª—å-–ú—É–∑–∑–∞–º–º–∏–ª—å
        73: [10, 20],
        
        // –°—É—Ä–∞ 74: –ê–ª—å-–ú—É–¥–¥–∞—Å—Å–∏—Ä
        74: [20, 40, 56],
        
        // –°—É—Ä–∞ 75: –ê–ª—å-–ö–∏—è–º–∞
        75: [15, 40],
        
        // –°—É—Ä–∞ 76: –ê–ª—å-–ò–Ω—Å–∞–Ω
        76: [15, 31],
        
        // –°—É—Ä–∞ 77: –ê–ª—å-–ú—É—Ä—Å–∞–ª—è—Ç
        77: [20, 40, 50],
        
        // –°—É—Ä–∞ 78: –ê–Ω-–ù–∞–±–∞
        78: [15, 30, 40],
        
        // –°—É—Ä–∞ 79: –ê–Ω-–ù–∞–∑–∏–∞—Ç
        79: [20, 40, 46],
        
        // –°—É—Ä–∞ 80: –ê–±–∞—Å–∞
        80: [20, 42],
        
        // –°—É—Ä–∞ 81: –ê—Ç-–¢–∞–∫–≤–∏—Ä
        81: [15, 29],
        
        // –°—É—Ä–∞ 82: –ê–ª—å-–ò–Ω—Ñ–∏—Ç–∞—Ä
        82: [10, 19],
        
        // –°—É—Ä–∞ 83: –ê–ª—å-–ú—É—Ç–∞—Ñ—Ñ–∏—Ñ–∏–Ω
        83: [18, 36],
        
        // –°—É—Ä–∞ 84: –ê–ª—å-–ò–Ω—à–∏–∫–∞–∫
        84: [15, 25],
        
        // –°—É—Ä–∞ 85: –ê–ª—å-–ë—É—Ä—É–¥–∂
        85: [12, 22],
        
        // –°—É—Ä–∞ 86: –ê—Ç-–¢–∞—Ä–∏–∫
        86: [10, 17],
        
        // –°—É—Ä–∞ 87: –ê–ª—å-–ê–ª—è
        87: [10, 19],
        
        // –°—É—Ä–∞ 88: –ê–ª—å-–ì–∞—à–∏—è
        88: [16, 26],
        
        // –°—É—Ä–∞ 89: –ê–ª—å-–§–∞–¥–∂—Ä
        89: [15, 30],
        
        // –°—É—Ä–∞ 90: –ê–ª—å-–ë–∞–ª—è–¥
        90: [10, 20],
        
        // –°—É—Ä–∞ 91: –ê—à-–®–∞–º—Å
        91: [10, 15],
        
        // –°—É—Ä–∞ 92: –ê–ª—å-–õ—è–π–ª—å
        92: [11, 21],
        
        // –°—É—Ä–∞ 93: –ê–¥-–î—É—Ö–∞
        93: [8, 11],
        
        // –°—É—Ä–∞ 94: –ê—à-–®–∞—Ä—Ö
        94: [5, 8],
        
        // –°—É—Ä–∞ 95: –ê—Ç-–¢–∏–Ω
        95: [6, 8],
        
        // –°—É—Ä–∞ 96: –ê–ª—å-–ê–ª—è–∫
        96: [10, 19],
        
        // –°—É—Ä–∞ 97: –ê–ª—å-–ö–∞–¥—Ä
        97: [5],
        
        // –°—É—Ä–∞ 98: –ê–ª—å-–ë–∞–π–π–∏–Ω–∞
        98: [5, 8],
        
        // –°—É—Ä–∞ 99: –ê–∑-–ó–∞–ª—å–∑–∞–ª—è
        99: [5, 8],
        
        // –°—É—Ä–∞ 100: –ê–ª—å-–ê–¥–∏—è—Ç
        100: [8, 11],
        
        // –°—É—Ä–∞ 101: –ê–ª—å-–ö–∞—Ä–∏–∞
        101: [8, 11],
        
        // –°—É—Ä–∞ 102: –ê—Ç-–¢–∞–∫–∞—Å—É—Ä
        102: [5, 8],
        
        // –°—É—Ä–∞ 103: –ê–ª—å-–ê—Å—Ä
        103: [3],
        
        // –°—É—Ä–∞ 104: –ê–ª—å-–•—É–º–∞–∑–∞
        104: [6, 9],
        
        // –°—É—Ä–∞ 105: –ê–ª—å-–§–∏–ª—å
        105: [5],
        
        // –°—É—Ä–∞ 106: –ö—É—Ä–∞–π—à
        106: [4],
        
        // –°—É—Ä–∞ 107: –ê–ª—å-–ú–∞—É–Ω
        107: [4, 7],
        
        // –°—É—Ä–∞ 108: –ê–ª—å-–ö–∞—É—Å–∞—Ä
        108: [3],
        
        // –°—É—Ä–∞ 109: –ê–ª—å-–ö–∞—Ñ–∏—Ä—É–Ω
        109: [6],
        
        // –°—É—Ä–∞ 110: –ê–Ω-–ù–∞—Å—Ä
        110: [3],
        
        // –°—É—Ä–∞ 111: –ê–ª—å-–ú–∞—Å–∞–¥
        111: [5],
        
        // –°—É—Ä–∞ 112: –ê–ª—å-–ò—Ö–ª—è—Å
        112: [4],
        
        // –°—É—Ä–∞ 113: –ê–ª—å-–§–∞–ª—è–∫
        113: [5],
        
        // –°—É—Ä–∞ 114: –ê–Ω-–ù–∞—Å
        114: [6] // –í–°–Ø –°–£–†–ê –ù–ê –û–î–ù–û–ô –°–¢–†–ê–ù–ò–¶–ï - –∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º—É—Å—Ö–∞—Ñ–µ
    };

    let isMushaf = true;
    let uiVisible = true;
    let activeSura = null;
    let currentFontSize = 28;
    let currentPage = 0;
    let totalPages = 0;
    let pagesContainer = null;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    async function init() {
        checkBookmark();
        try {
            const r = await fetch('https://api.alquran.cloud/v1/surah');
            const d = await r.json();
            const list = document.getElementById('surah-list');
            d.data.forEach(s => {
                list.innerHTML += `
                    <div class="surah-card" onclick="loadSurah(${s.number})">
                        <span style="color:var(--gold); font-size:1.1rem;">${s.number}</span>
                        <span style="flex-grow:1; margin-left:15px; font-weight:500; color:#fff;">${s.englishName}</span>
                        <span style="font-family:'KFGQPC', 'Amiri'; color:var(--gold); font-size:1.5rem">${s.name}</span>
                    </div>`;
            });
        } catch(e) { 
            console.log("Network Error", e);
            document.getElementById('surah-list').innerHTML = '<div style="color:var(--gold); text-align:center; padding:50px;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</div>';
        }
        
        const savedFontSize = localStorage.getItem('font_size');
        if (savedFontSize) {
            currentFontSize = parseInt(savedFontSize);
            document.getElementById('font-size-display').textContent = currentFontSize;
            document.documentElement.style.setProperty('--font-size', currentFontSize + 'px');
        }
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –ø–æ–ª—è
    function handleReaderClick(e) {
        if (!e.target.closest('.ui-el') && !e.target.closest('.surah-card') && !e.target.closest('.btn-ui') && !e.target.closest('.font-btn') && !e.target.closest('.btns')) {
            if (e.target.closest('#reader')) {
                toggleUI(e);
            }
        }
    }

    // –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞
    function increaseFontSize(e) {
        if (e) e.stopPropagation();
        currentFontSize = Math.min(42, currentFontSize + 2);
        updateFontSize();
    }
    
    function decreaseFontSize(e) {
        if (e) e.stopPropagation();
        currentFontSize = Math.max(20, currentFontSize - 2);
        updateFontSize();
    }
    
    function updateFontSize() {
        document.documentElement.style.setProperty('--font-size', currentFontSize + 'px');
        document.getElementById('font-size-display').textContent = currentFontSize;
        localStorage.setItem('font_size', currentFontSize);
    }

    // –ó–∞–∫–ª–∞–¥–∫–∞
    function checkBookmark() {
        const last = localStorage.getItem('last_read');
        if (last) {
            try {
                const data = JSON.parse(last);
                document.getElementById('resume-box').style.display = 'block';
                document.getElementById('resume-btn').innerText = `–°—É—Ä–∞ ${data.name || ''} (—Å—Ç—Ä. ${data.page || 1})`;
            } catch(e) {}
        }
    }

    async function resumeReading() {
        const last = JSON.parse(localStorage.getItem('last_read'));
        if (last) {
            await loadSurah(last.id, last.page || 1);
        }
    }

    // –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–±–∏–≤–∫—É –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –¥–ª—è —Å—É—Ä—ã –∏–∑ —Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º—É—Å—Ö–∞—Ñ–∞
    function getMushafPageBreaks(suraNumber) {
        return MUSHAF_PAGES[suraNumber] || null;
    }

    async function loadSurah(num, targetPage = 1) {
        activeSura = num;
        pagesContainer = document.getElementById('pagesContainer');
        document.getElementById('reader').style.display = 'block';
        pagesContainer.innerHTML = '<div style="color:var(--gold); text-align:center; margin-top:40vh; font-size:1.2rem;">–ó–∞–≥—Ä—É–∑–∫–∞ –°–≤—è—â–µ–Ω–Ω–æ–≥–æ –ö–æ—Ä–∞–Ω–∞...</div>';

        try {
            const res = await fetch(`https://api.alquran.cloud/v1/surah/${num}/editions/quran-uthmani,ru.kuliev`);
            const data = await res.json();
            const ar = data.data[0].ayahs;
            const ru = data.data[1].ayahs;
            
            document.getElementById('s-current').innerText = data.data[0].englishName;

            // –ü–æ–ª—É—á–∞–µ–º —Ç–æ—á–Ω—É—é —Ä–∞–∑–±–∏–≤–∫—É –∏–∑ –º—É—Å—Ö–∞—Ñ–∞
            let pageBreaks = getMushafPageBreaks(num);
            
            // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ—á–Ω–æ–π —Ä–∞–∑–±–∏–≤–∫–∏, —Å–æ–∑–¥–∞–µ–º –ª–æ–≥–∏—á–µ—Å–∫—É—é
            if (!pageBreaks) {
                if (ar.length <= 10) {
                    pageBreaks = [ar.length]; // –≤—Å—è —Å—É—Ä–∞ –Ω–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                } else {
                    // –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—É—Ä - –æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö - —Ä–∞–∑—É–º–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ
                    const ayatsPerPage = ar.length <= 20 ? ar.length : Math.ceil(ar.length / 3);
                    pageBreaks = [];
                    for (let i = ayatsPerPage; i < ar.length; i += ayatsPerPage) {
                        pageBreaks.push(i);
                    }
                    pageBreaks.push(ar.length);
                }
            }
            
            // –†–∞–∑–±–∏–≤–∞–µ–º –∞—è—Ç—ã –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
            const pages = [];
            let lastBreak = 0;
            
            for (let i = 0; i < pageBreaks.length; i++) {
                const endAyah = pageBreaks[i];
                const pageAyats = ar.filter(a => {
                    const ayahNum = a.numberInSurah;
                    return ayahNum > lastBreak && ayahNum <= endAyah;
                });
                
                if (pageAyats.length > 0) {
                    pages.push({
                        start: lastBreak + 1,
                        end: endAyah,
                        ayahs: pageAyats
                    });
                    lastBreak = endAyah;
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Å—Ç–∞–ª–∏—Å—å –ª–∏ –∞—è—Ç—ã
            if (lastBreak < ar.length) {
                const remainingAyats = ar.filter(a => a.numberInSurah > lastBreak);
                if (remainingAyats.length > 0) {
                    pages.push({
                        start: lastBreak + 1,
                        end: ar[ar.length - 1].numberInSurah,
                        ayahs: remainingAyats
                    });
                }
            }
            
            totalPages = pages.length;
            
            // –°—Ç—Ä–æ–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            let pagesHtml = '';
            
            pages.forEach((page, pageIndex) => {
                const pageNum = pageIndex + 1;
                let pageHtml = `<div class="page" data-page="${pageNum}">`;
                pageHtml += `<div class="page-content">`;
                
                // –ù–∞–∑–≤–∞–Ω–∏–µ —Å—É—Ä—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                if (pageIndex === 0) {
                    pageHtml += `<div class="surah-title">${data.data[0].name}</div>`;
                    
                    // –ë–∞—Å–º–∞–ª–∞ (–∫—Ä–æ–º–µ —Å—É—Ä 1 –∏ 9)
                    if (num !== 9 && num !== 1) {
                        pageHtml += `<div class="bismillah">ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê</div>`;
                    }
                }
                
                pageHtml += `<div class="quran-text">`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞—è—Ç—ã —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                page.ayahs.forEach((ayah) => {
                    const n = ayah.numberInSurah;
                    const ruAyah = ru.find(r => r.numberInSurah === n);
                    const note = localStorage.getItem(`note_${num}_${n}`) || '';
                    
                    let text = ayah.text;
                    // –£–±–∏—Ä–∞–µ–º –±–∞—Å–º–∞–ª—É –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –∞—è—Ç–∞ (–∫—Ä–æ–º–µ —Å—É—Ä 1 –∏ 9)
                    if (n === 1 && num !== 1 && num !== 9 && pageIndex === 0) {
                        text = text.replace("ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸéŸáŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê", "").trim();
                    }

                    pageHtml += `
                        <div class="ayah-wrapper" id="ayah-${n}">
                            ${text} <span class="ayah-num">Ô¥ø${n}Ô¥æ</span>
                            <div class="translation">${ruAyah ? ruAyah.text : ''}</div>
                            <div class="btns">
                                <button class="btn-ui" onclick="playAyah(${ayah.number})">‚ñ∂ –ê–£–î–ò–û</button>
                                <button class="btn-ui" onclick="toggleNote(${n})">üìù –ó–ê–ú–ï–¢–ö–ê</button>
                            </div>
                            <textarea id="note-${n}" class="note-box" onblur="saveNote(${num},${n},this.value)" placeholder="–í–∞—à–∞ –∑–∞–º–µ—Ç–∫–∞...">${note}</textarea>
                        </div>`;
                });
                
                pageHtml += `</div>`; // –∑–∞–∫—Ä—ã–≤–∞–µ–º quran-text
                pageHtml += `</div>`; // –∑–∞–∫—Ä—ã–≤–∞–µ–º page-content
                pageHtml += `</div>`; // –∑–∞–∫—Ä—ã–≤–∞–µ–º page
                
                pagesHtml += pageHtml;
            });
            
            pagesContainer.innerHTML = pagesHtml;
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            applyMode();
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            setTimeout(() => {
                if (targetPage && targetPage <= totalPages) {
                    goToPage(targetPage);
                } else {
                    goToPage(1);
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º —á—Ç–µ–Ω–∏–∏
                localStorage.setItem('last_read', JSON.stringify({
                    id: num,
                    name: data.data[0].englishName,
                    page: targetPage || 1,
                    totalPages: totalPages
                }));
            }, 150);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∫—Ä–æ–ª–ª–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
            pagesContainer.onscroll = function() {
                updatePageIndicator();
                saveReadingPosition();
            };

        } catch(e) { 
            console.error(e);
            pagesContainer.innerHTML = '<div style="color:var(--gold); text-align:center; margin-top:40vh; font-size:1.2rem;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</div>'; 
        }
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    function goToPage(pageNum) {
        if (!pagesContainer) return;
        const pages = document.querySelectorAll('.page');
        if (pages.length >= pageNum) {
            pages[pageNum - 1].scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'start' });
            currentPage = pageNum;
            document.getElementById('page-indicator').textContent = `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${pageNum} –∏–∑ ${totalPages}`;
        }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function updatePageIndicator() {
        if (!pagesContainer) return;
        const pages = document.querySelectorAll('.page');
        const containerRect = pagesContainer.getBoundingClientRect();
        
        for (let i = 0; i < pages.length; i++) {
            const page = pages[i];
            const rect = page.getBoundingClientRect();
            if (rect.left >= containerRect.left - 20 && rect.left < containerRect.left + 80) {
                currentPage = i + 1;
                document.getElementById('page-indicator').textContent = `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${currentPage} –∏–∑ ${totalPages}`;
                
                if (activeSura) {
                    localStorage.setItem('last_read', JSON.stringify({
                        id: activeSura,
                        name: document.getElementById('s-current').innerText,
                        page: currentPage,
                        totalPages: totalPages
                    }));
                }
                break;
            }
        }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —á—Ç–µ–Ω–∏—è
    function saveReadingPosition() {
        if (!activeSura) return;
        if (currentPage) {
            localStorage.setItem('last_read', JSON.stringify({
                id: activeSura,
                name: document.getElementById('s-current').innerText,
                page: currentPage,
                totalPages: totalPages
            }));
        }
    }

    function playAyah(id) { 
        new Audio(`https://cdn.islamic.network/quran/audio/128/ar.alafasy/${id}.mp3`).play(); 
    }
    
    function toggleNote(id) {
        const el = document.getElementById(`note-${id}`);
        if (el) {
            el.style.display = el.style.display === 'block' ? 'none' : 'block';
        }
    }

    function saveNote(s, a, v) { 
        localStorage.setItem(`note_${s}_${a}`, v); 
    }

    function toggleUI(e) {
        if (e) e.stopPropagation();
        uiVisible = !uiVisible;
        document.querySelectorAll('.ui-el').forEach(el => el.classList.toggle('ui-hidden', !uiVisible));
    }

    function toggleMode(e) { 
        if (e) e.stopPropagation(); 
        isMushaf = !isMushaf; 
        applyMode(); 
    }
    
    function applyMode() {
        const container = document.getElementById('pagesContainer');
        if (container) {
            isMushaf ? container.classList.add('mushaf-mode') : container.classList.remove('mushaf-mode');
        }
    }

    function closeReader(e) {
        if (e) e.stopPropagation();
        document.getElementById('reader').style.display = 'none';
        checkBookmark();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    init();
</script>
</body>
</html>
